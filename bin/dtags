#!/bin/bash

ctags \
  --langdef=coffee \
  --langmap=coffee:.coffee \
  --regex-coffee='/^[[:space:]]*([a-zA-Z_0-9\.]+\.)?([a-zA-Z_0-9]+)[[:space:]]*=[[:space:]]*([a-zA-Z_0-9\.]+)\.extend/\2/c,class/' \
  --regex-coffee='/^[[:space:]]*class[[:space:]]+([a-zA-Z_0-9\.]+\.)?([a-zA-Z_0-9]+)/\2/c,class/' \
  --regex-coffee='/^[[:space:]]*([a-zA-Z_0-9\.]+\.)?([a-zA-Z_0-9]+)[[:space:]]*[=:][[:space:]]*(\([^\)]+\))?[[:space:]]*[=-]>/\2/m,method/' \
  --regex-coffee='/^[A-Z]([a-zA-Z_0-9\.]+\.)?([a-zA-Z_0-9]+)[[:space:]]*=[[:space:]]*$/\2/o,object/' \
  $*
